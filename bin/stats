#!/bin/sh

PNL_STEP=${1:-30}

AGG_WITH=""

if [ ${2:-false} = "true" ]; then
    AGG_WITH='isWithOppositeOrder()'
fi

if [ ${3:-false} = "true" ]; then
    AGG_WITH='isCloseByMarketContextSet()'
fi

echo "---- ACCOUNT info ----"
./bin/console balance:info
printf "\n"

echo "----  SHORT info -----"
./bin/console sl:info sell --showPnl -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}"

echo "----  LONG info  -----"
./bin/console sl:info buy --showPnl -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}"
