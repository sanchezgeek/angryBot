#!/bin/sh

PNL_STEP=${1:-30}
SHOW_PNL=""
AGG_WITH=""

if [ ${2:-false} = "true" ]; then
    SHOW_PNL='--showPnl'
fi

echo ${SHOW_PNL}

if [ ${3:-false} = "true" ]; then
    AGG_WITH='isWithOppositeOrder()'
fi

if [ ${4:-false} = "true" ]; then
    AGG_WITH='isCloseByMarketContextSet()'
fi

echo "---- ACCOUNT info ----"
./bin/console balance:info
printf "\n"

echo "----  SHORT info -----"
./bin/console sl:info sell ${SHOW_PNL} -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}"

echo "----  LONG info  -----"
./bin/console sl:info buy ${SHOW_PNL} -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}" --showState --showSize --showCum
