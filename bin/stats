#!/bin/sh

PNL_STEP=${1:-30}

AGG_WITH=""

if [ $2 = "true" ]; then
    AGG_WITH='isWithOppositeOrder()'
  else
    AGG_WITH=""
fi

if [ $3 = "true" ]; then
    AGG_WITH='isCloseByMarketContextSet()'
  else
    AGG_WITH=""
fi

echo "---- ACCOUNT info ----"
./bin/console balance:info

echo "----  SHORT info -----"
./bin/console sl:info sell --showPnl -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}"

echo "----  LONG info  -----"
./bin/console sl:info buy --showPnl -p"${PNL_STEP}" --aggregateWith="${AGG_WITH}"
