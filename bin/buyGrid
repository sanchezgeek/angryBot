#!/bin/bash

UNDO_LOG="$(pwd)/data/open-undo.$(/usr/bin/uuidgen).undo"

SIDE=${1:-sell}

grids=(
  "-f-200% -t700% 0.001 ${2:-165} --wOO"  #1  6
  "-f-200% -t700% 0.002 ${3:-285} --wOO"  #2  6
  "-f-200% -t700% 0.003 ${4:-325}"  #3  6
  "-f-200% -t700% 0.004 ${5:-695}"  #4  4.5
  "-f-200% -t700% 0.005 ${6:-1225}" #5  5
  "-f-200% -t700% 0.001 ${6:-1225}" #6  1
  "-f-200% -t700% 0.002 ${6:-1225}" #6  2
  "-f-200% -t700% 0.003 ${6:-1225}" #6
)
#                                       30

for grid_def in "${grids[@]}"
  do
    grid_cmd="./bin/console buy:grid -q ${SIDE} ${grid_def}"
    echo -e "${grid_cmd}\n  =>"
    undo_out=$(eval "${grid_cmd}")
    echo -e "    ${undo_out}\n"
    echo "${undo_out}" >> "${UNDO_LOG}"
  done

echo -e "\nTo delete created BuyOrders just run:"
echo -e "\n  ./bin/batchRun ${UNDO_LOG}"
