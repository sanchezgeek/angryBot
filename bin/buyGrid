#!/bin/bash

UNDO_LOG="$(pwd)/data/open-undo.$(cat /proc/sys/kernel/random/uuid).undo"

SIDE=${1:-sell}

grids=(
  "-f-200% -t700% 0.001 ${2:-125} "
  "-f-200% -t700% 0.002 ${3:-225}"
  "-f-200% -t700% 0.003 ${4:-325}"
  "-f-200% -t700% 0.004 ${5:-425}"
  "-f-200% -t700% 0.005 ${6:-525}"
  "-f-200% -t700% 0.006 ${7:-625}"
  "-f-200% -t700% 0.007 ${8:-725}"
  "-f-200% -t700% 0.001 ${8:-725}"
  "-f-200% -t700% 0.008 ${9:-925}"
  "-f-200% -t700% 0.001 ${9:-925}"
  "-f-200% -t700% 0.002 ${9:-925}"
  "-f-200% -t700% 0.003 ${9:-925}"
)

for grid_def in "${grids[@]}"
  do
    grid_cmd="./bin/console buy:grid -q ${SIDE} ${grid_def}"
    echo -e "${grid_cmd}\n  =>"
    undo_out=$(eval "${grid_cmd}")
    echo -e "    ${undo_out}\n"
    echo "${undo_out}" >> "${UNDO_LOG}"
  done

echo -e "\nTo delete created BuyOrders just run:"
echo -e "\n  ./bin/batchRun ${UNDO_LOG}"